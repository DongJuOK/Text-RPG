#include "game.h"

char key = 0;
char name[100];

void title()
{
	const char title[HEIGHT][WIDTH] =
	{
		{ '2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2' },
		{ '0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0' },
		{ '0','0','1','1','1','0','1','1','1','0','1','0','1','0','1','1','1','0','0','0','0','0','1','1','1','0','0','1','1','1','0','0','0','1','1','0','0','0' },
		{ '0','0','0','1','0','0','1','0','0','0','1','0','1','0','0','1','0','0','0','0','0','0','1','0','0','1','0','1','0','0','1','0','1','0','0','1','0','0' },
		{ '0','0','0','1','0','0','1','1','1','0','0','1','0','0','0','1','0','0','1','1','1','0','1','1','1','0','0','1','1','1','0','0','1','0','0','0','0','0' },
		{ '0','0','0','1','0','0','1','0','0','0','1','0','1','0','0','1','0','0','0','0','0','0','1','0','0','1','0','1','0','0','0','0','1','0','1','1','0','0' },
		{ '0','0','0','1','0','0','1','1','1','0','1','0','1','0','0','1','0','0','0','0','0','0','1','0','0','1','0','1','0','0','0','0','0','1','1','0','0','0' },
		{ '0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0' },
		{ '2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2' }
	};

	for (int i = 0; i < HEIGHT; i++)
	{
		for (int j = 0; j < WIDTH; j++)
		{
			if (title[i][j] == '1')
			{
				printf("■");
			}
			else if (title[i][j] == '0')
			{
				printf("  ");
			}
			else
			{
				printf("〓");
			}
		}

		printf("\n");
	}
}

void t_box()
{
	gotoxy(0, 8);

	const char title[HEIGHT][WIDTH] =
	{
		{ '2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2' },
		{ '1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1' },
		{ '1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1' },
		{ '1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1' },
		{ '1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1' },
		{ '1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1' },
		{ '1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1' },
		{ '1','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1' },
		{ '2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2' }
	};

	for (int i = 0; i < HEIGHT; i++)
	{
		for (int j = 0; j < WIDTH; j++)
		{
			if (title[i][j] == '1')
			{
				printf("｜");
			}
			else if (title[i][j] == '0')
			{
				printf("  ");
			}
			else
			{
				printf("--");
			}
		}

		printf("\n");
	}
}

int menu()
{
	int x = 32;
	int y = 14;

	gotoxy(x - 2, y);
	printf("> 게 임 시 작");
	gotoxy(x, y + 2);
	printf("게 임 정 보");
	gotoxy(x, y + 4);
	printf("   종 료   ");

	while (1)
	{
		if (_kbhit())
		{
			key = _getch();

			if (key == -32)
			{
				key = _getch();
			}

			switch (key)
			{
			case UP: if (y > 14)
			{
				gotoxy(x - 2, y);
				printf(" ");
				gotoxy(x - 2, y -= 2);
				printf(">");
			}
				   break;

			case DOWN: if (y < 18)
			{
				gotoxy(x - 2, y);
				printf(" ");
				gotoxy(x - 2, y += 2);
				printf(">");
			}
					 break;

			case SUBMIT:
			{
				return y - 14;
			}
			}
		}
	}

	return 0;
}

void info()
{
	system("cls");

	gotoxy(32, 5);
	printf("[ 조 작 법 ]");

	gotoxy(29, 8);
	printf("이 동 : W, A, S, D");

	gotoxy(27, 11);
	printf("선 택 : 스 페 이 스 바");

	gotoxy(29, 16);
	printf("※ 주 의 사 항 ※");

	gotoxy(19, 18);
	printf("CapsLock이 꺼진 상태로 플레이 해주세요.");

	gotoxy(17, 22);
	printf("스페이스바를 누르면 메인화면으로 이동합니다.");

	while (1)
	{
		if (_kbhit())
		{
			key = _getch();

			if (key == -32)
			{
				key = _getch();
			}

			switch (key)
			{
			case SUBMIT: return;
			}
		}
	}
}

void play_1()
{
	system("cls");

	const char* story[SIZE];


	story[0] = "때는 2950년 좀비 바이러스 창궐.";

	story[1] = "%s은 이 바이러스를 끝낼 유일한 희망이다.", name;

	story[2] = "부산에 있는 한 선박에 치료제가 있다.";

	story[3] = "좀비들을 물리치며 치료제를 찾도록 하자.";

	story[4] = "다음 : 스페이스";

	for (int i = 0; i < SIZE; i++)
	{
		printf("%s", story[i]);
		Sleep(1000);
	}
}

void start()
{
	system("cls");
	t_box();

	gotoxy(22, 12);
	printf("닉네임을 입력하세요: ");
	scanf_s("%s", &name, 100);
	int length = strlen(name);

	system("cls");
	t_box();

	gotoxy(30 - length/2, 12);
	printf("반갑습니다 %s님.", name);
	gotoxy(18, 20);
	printf("스페이스바를 누르면 게임을 시작합니다.");

	while (1)
	{
		if (_kbhit())
		{
			key = _getch();

			if (key == -32)
			{
				key = _getch();
			}

			switch (key)
			{
			case SUBMIT: play_1();
			}
		}
	}
}
